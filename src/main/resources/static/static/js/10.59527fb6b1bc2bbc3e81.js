webpackJsonp([10],{"4xPl":function(a,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=e("BO1k"),s=e.n(r),l=e("//Fk"),n=e.n(l),o=e("P9l9"),i=e("1fBy"),c=(e("NdhP"),{name:"sashistory",data:function(){return this.gaugeChartSettings={dataName:{score:"焦虑评分"},seriesMap:{score:{min:0,max:100,splitNumber:10,axisLine:{lineStyle:{color:[[.5,"#2B91D5"],[.6,"#55AA77"],[.7,"#AAAA55"],[1,"#c23531"]],width:30,shadowColor:"#fff",shadowBlur:10}}}}},this.pieChartSettings={level:[["男","女"],["已婚","未婚"]]},this.heatMapChartSettings={position:"china",type:"map",geo:{label:{emphasis:{show:!1}},itemStyle:{normal:{areaColor:"#323c48",borderColor:"#111"},emphasis:{areaColor:"#2a333d"}}}},{sex_relevance:"",marriage_relevance:"",age_relevance:"",salary_relevance:"",username:"",userId:"",ExamineDialogVisible:!1,usersashistory:[],userInfo:[],listLoading:!0,sashistory:[],ringChartData:{columns:["收入情况","人数"],rows:[]},histogramData:{columns:["年龄","焦虑"],rows:[]},gaugeChartData:{columns:["type","value"],rows:[]},pieChartData:{columns:["人群","负面情绪倾向人数"],rows:[]},heatMapChartData:{columns:["lat","lng","人数"],rows:[{lat:115.892151,lng:40.676493,"人数":800},{lat:115.892151,lng:28.676493,"人数":1e3},{lat:117.000923,lng:36.675807,"人数":400},{lat:113.665412,lng:34.757975,"人数":800},{lat:104.065735,lng:30.659462,"人数":700},{lat:108.948024,lng:34.263161,"人数":300},{lat:103.823557,lng:36.058039,"人数":500}]}}},methods:{getData:function(){var a=this;new n.a(function(a,t){a(Object(o.k)().then(function(a){return a.data}))}).then(function(t){a.sashistory=t,a.listLoading=!1;var e=0,r=0,l=0,n=0,o=0,i=0,c=0,u=0,m=0,v=0,d=0,p=0,h=0,g=0,b=0,f=0,_=0,w=!0,y=!1,x=void 0;try{for(var C,I=s()(t);!(w=(C=I.next()).done);w=!0){var D=C.value;if(e+=parseInt(D.sum),parseInt(D.sum)>59){switch(1===parseInt(D.user.sex)?r+=1:l+=1,1===parseInt(D.user.marriage)?n+=1:o+=1,parseInt(D.user.salary)){case 1:i+=1;break;case 2:c+=1;break;case 3:u+=1;break;case 4:m+=1;break;case 5:v+=1;break;case 6:d+=1;break;case 7:p+=1}parseInt(D.user.age)>=20&&parseInt(D.user.age)<30?h+=1:parseInt(D.user.age)>=30&&parseInt(D.user.age)<40?g+=1:parseInt(D.user.age)>=40&&parseInt(D.user.age)<50?b+=1:parseInt(D.user.age)>=50&&parseInt(D.user.age)<70?f+=1:parseInt(D.user.age)>=70&&(_+=1)}}}catch(a){y=!0,x=a}finally{try{!w&&I.return&&I.return()}finally{if(y)throw x}}var S={type:"score",value:e=Math.round(e/t.length)};a.gaugeChartData.rows.push(S);var k=[{"人群":"男","负面情绪倾向人数":r},{"人群":"女","负面情绪倾向人数":l},{"人群":"已婚","负面情绪倾向人数":n},{"人群":"未婚","负面情绪倾向人数":o}],N=!0,E=!1,A=void 0;try{for(var M,O=s()(k);!(N=(M=O.next()).done);N=!0){var j=M.value;a.pieChartData.rows.push(j)}}catch(a){E=!0,A=a}finally{try{!N&&O.return&&O.return()}finally{if(E)throw A}}var L=[{"收入情况":"1000元以下","人数":i},{"收入情况":"1000-1999元","人数":c},{"收入情况":"2000-3999元","人数":u},{"收入情况":"4000-5999元","人数":m},{"收入情况":"6000-9999元","人数":v},{"收入情况":"10000-19999元","人数":d},{"收入情况":"200000元以上","人数":p}],V=!0,B=!1,P=void 0;try{for(var R,F=s()(L);!(V=(R=F.next()).done);V=!0){var W=R.value;a.ringChartData.rows.push(W)}}catch(a){B=!0,P=a}finally{try{!V&&F.return&&F.return()}finally{if(B)throw P}}var Y=[{"年龄":"20-30","焦虑":h},{"年龄":"30-40","焦虑":g},{"年龄":"40-50","焦虑":b},{"年龄":"50-70","焦虑":f},{"年龄":"70+","焦虑":_}],$=!0,z=!1,J=void 0;try{for(var T,U=s()(Y);!($=(T=U.next()).done);$=!0){var q=T.value;a.histogramData.rows.push(q)}}catch(a){z=!0,J=a}finally{try{!$&&U.return&&U.return()}finally{if(z)throw J}}a.sex_relevance="0.719(60%-75%概率相关)",a.marriage_relevance="0.721(60%-75%概率相关)",a.age_relevance="0.528(50%-60%概率相关)",a.salary_relevance="0.437(低于50%概率相关)"})},tableRowName:function(a){var t=a.row,e=(a.rowIndex,"");return parseInt(t.sum)<=50?e+="safe-sas-row":parseInt(t.sum)>50&&parseInt(t.sum)<=60?e+="light-sas-row":parseInt(t.sum)>60&&parseInt(t.sum)<=70?e+="medium-sas-row":parseInt(t.sum)>70&&(e+="warning-sas-row"),e},calculateAverage:function(a){var t=a.columns,e=a.data,r=[];return t.forEach(function(a,t){if(0!==t){var s=e.map(function(t){return Number(t[a.property])});s.every(function(a){return isNaN(a)})?r[t]="--":(r[t]=s.reduce(function(a,t){var e=Number(t);return isNaN(e)?a:a+t},0),r[t]=(r[t]/e.length).toFixed(3))}else r[t]="平均值"}),r},handleExamine:function(a,t){var e=this;this.ExamineDialogVisible=!0,this.username=t.user.username,this.userId=t.user.id;var r=[];r.push(t.user),this.userInfo=r;var s={userid:parseInt(t.user.id)};Object(o.p)(s).then(function(a){e.usersashistory=a.data})},dateformatter:function(a,t){return Object(i.a)(a,t)},formatSex:function(a,t){return Object(i.d)(a,t)},formatSalary:function(a,t){return Object(i.c)(a,t)},formatMarriage:function(a,t){return Object(i.b)(a,t)},formatWork:function(a,t){return Object(i.e)(a,t)}},mounted:function(){this.getData()}}),u={render:function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("section",{staticClass:"sashistory"},[e("div",{staticClass:"crumbs"},[e("el-breadcrumb",{attrs:{separator:"/"}},[e("el-breadcrumb-item",[e("i",{staticClass:"el-icon-time"}),a._v(" 历史记录")]),a._v(" "),e("el-breadcrumb-item",[a._v("SAS历史记录")])],1)],1),a._v(" "),e("section",{staticClass:"sextion-1"},[e("el-row",{attrs:{gutter:10}},[e("el-col",{attrs:{span:11}},[e("el-card",{staticClass:"box-card",staticStyle:{overflow:"auto"}},[e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:a.listLoading,expression:"listLoading"}],attrs:{data:a.sashistory,height:"460",width:"95%","summary-method":a.calculateAverage,"show-summary":"","highlight-current-row":"",border:"","row-class-name":a.tableRowName}},[e("el-table-column",{attrs:{prop:"id",label:"序号",width:"80",sortable:""}}),a._v(" "),e("el-table-column",{attrs:{prop:"user.id",label:"测试者ID",width:"80"}}),a._v(" "),e("el-table-column",{attrs:{prop:"time",label:"测试时间",width:"160",formatter:a.dateformatter,sortable:""}}),a._v(" "),e("el-table-column",{attrs:{prop:"sum",label:"焦虑评分",sortable:""}}),a._v(" "),e("el-table-column",{attrs:{label:"操作",width:"100",fixed:"right"},scopedSlots:a._u([{key:"default",fn:function(t){return[e("el-button",{attrs:{size:"small",type:"text"},on:{click:function(e){return a.handleExamine(t.$index,t.row)}}},[a._v("历史记录")])]}}])})],1)],1)],1),a._v(" "),e("el-col",{attrs:{span:11}},[e("el-card",{staticClass:"box-card"},[e("ve-gauge",{attrs:{data:a.gaugeChartData,settings:a.gaugeChartSettings}}),a._v(" "),e("span",[a._v("平均焦虑评分的仪表图")])],1)],1)],1)],1),a._v(" "),e("section",{staticClass:"section-2"},[e("el-row",{attrs:{gutter:10}},[e("el-col",{attrs:{span:11}},[e("el-card",{staticClass:"box-card"},[e("ve-pie",{attrs:{data:a.pieChartData,settings:a.pieChartSettings}}),a._v(" "),e("span",[a._v("有明显负面情绪倾向人群的性别、婚姻情况分布")]),a._v(" "),e("p",[a._v("性别关联度:"+a._s(a.sex_relevance))]),a._v(" "),e("p",[a._v("是否已婚关联度:"+a._s(a.marriage_relevance))])],1)],1),a._v(" "),e("el-col",{attrs:{span:11}},[e("el-card",{staticClass:"box-card"},[e("ve-histogram",{attrs:{data:a.histogramData}}),a._v(" "),e("span",[a._v("有负面情绪倾向人群的年龄统计")]),a._v(" "),e("p",[a._v("年龄关联度:"+a._s(a.age_relevance))])],1)],1)],1)],1),a._v(" "),e("section",{staticClass:"section-3"},[e("el-row",{attrs:{gutter:10}},[e("el-col",{attrs:{span:11}},[e("el-card",{staticClass:"box-card"},[e("ve-ring",{attrs:{data:a.ringChartData}}),a._v(" "),e("span",[a._v("有明显负面情绪倾向人群的收入分布")]),a._v(" "),e("p",[a._v("收入关联度:"+a._s(a.salary_relevance))])],1)],1),a._v(" "),e("el-col",{attrs:{span:11}},[e("el-card",{staticClass:"box-card"},[e("ve-heatmap",{attrs:{data:a.heatMapChartData,settings:a.heatMapChartSettings}}),a._v(" "),e("span",[a._v("有明显负面情绪倾向人群的地区分布")])],1)],1)],1)],1),a._v(" "),e("el-dialog",{attrs:{title:"历史记录",visible:a.ExamineDialogVisible,width:"50%"},on:{"update:visible":function(t){a.ExamineDialogVisible=t}}},[e("p",{staticStyle:{margin:"20px 0"}},[a._v("用户名: "+a._s(a.username)+" (ID:"+a._s(a.userId)+") 的历史记录")]),a._v(" "),e("div",{staticClass:"userInfoTable",staticStyle:{"margin-bottom":"20px"}},[e("el-table",{attrs:{data:a.userInfo,border:"",width:"100%"}},[e("el-table-column",{attrs:{prop:"age",label:"年龄",width:"80"}}),a._v(" "),e("el-table-column",{attrs:{prop:"sex",label:"性别",formatter:a.formatSex,width:"80"}}),a._v(" "),e("el-table-column",{attrs:{prop:"location",label:"地区"}}),a._v(" "),e("el-table-column",{attrs:{prop:"salary",label:"薪资",formatter:a.formatSalary,width:"120"}}),a._v(" "),e("el-table-column",{attrs:{prop:"work",label:"从事行业",formatter:a.formatWork}}),a._v(" "),e("el-table-column",{attrs:{prop:"marriage",label:"是否已婚",formatter:a.formatMarriage,width:"80"}})],1)],1),a._v(" "),e("div",{staticStyle:{"text-align":"center"}},[e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:a.listLoading,expression:"listLoading"}],attrs:{data:a.usersashistory,"max-height":"300",border:"",width:"100%","row-class-name":a.tableRowName}},[e("el-table-column",{attrs:{prop:"id",label:"序号",width:"80",sortable:""}}),a._v(" "),e("el-table-column",{attrs:{prop:"userid",label:"测试者ID",width:"80"}}),a._v(" "),e("el-table-column",{attrs:{prop:"time",label:"测试时间",formatter:a.dateformatter,sortable:""}}),a._v(" "),e("el-table-column",{attrs:{prop:"sum",label:"焦虑评分",sortable:""}})],1)],1),a._v(" "),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"primary"},on:{click:function(t){a.ExamineDialogVisible=!1}}},[a._v("关闭")])],1)])],1)},staticRenderFns:[]};var m=e("VU/8")(c,u,!1,function(a){e("ca+o"),e("iEYE")},"data-v-30e7a296",null);t.default=m.exports},"ca+o":function(a,t){},iEYE:function(a,t){}});
//# sourceMappingURL=10.59527fb6b1bc2bbc3e81.js.map