webpackJsonp([3],{"M3+Z":function(a,t){},SPzo:function(a,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=e("BO1k"),s=e.n(r),n=e("//Fk"),l=e.n(n),o=e("P9l9"),i=e("1fBy"),c=(e("NdhP"),{name:"novackhistory",data:function(){return this.gaugeChartSettings={dataName:{score:"愤怒评分"},seriesMap:{score:{min:0,max:100,splitNumber:10,axisLine:{lineStyle:{color:[[.45,"#2B91D5"],[.55,"#55AA77"],[.75,"#AAAA55"],[.85,"#E66B1A"],[1,"#c23531"]],width:30,shadowColor:"#fff",shadowBlur:10}}}}},this.pieChartSettings={level:[["男","女"],["已婚","未婚"]]},this.heatMapChartSettings={position:"china",type:"map",geo:{label:{emphasis:{show:!1}},itemStyle:{normal:{areaColor:"#323c48",borderColor:"#111"},emphasis:{areaColor:"#2a333d"}}}},{sex_relevance:"",marriage_relevance:"",age_relevance:"",salary_relevance:"",username:"",userId:"",ExamineDialogVisible:!1,usernovackhistory:[],userInfo:[],listLoading:!0,novackhistory:[],ringChartData:{columns:["收入情况","人数"],rows:[]},histogramData:{columns:["年龄","愤怒"],rows:[]},gaugeChartData:{columns:["type","value"],rows:[]},pieChartData:{columns:["人群","负面情绪倾向人数"],rows:[]},heatMapChartData:{columns:["lat","lng","人数"],rows:[{lat:115.892151,lng:28.676493,"人数":1e3},{lat:117.000923,lng:36.675807,"人数":400},{lat:113.665412,lng:34.757975,"人数":800},{lat:114.298572,lng:30.584355,"人数":200},{lat:112.982279,lng:28.19409,"人数":100},{lat:113.280637,lng:23.125178,"人数":300},{lat:110.33119,lng:20.031971,"人数":800},{lat:104.065735,lng:30.659462,"人数":700},{lat:108.948024,lng:34.263161,"人数":300},{lat:103.823557,lng:36.058039,"人数":500}]}}},methods:{getData:function(){var a=this;new l.a(function(a,t){a(Object(o.j)().then(function(a){return a.data}))}).then(function(t){a.novackhistory=t,a.listLoading=!1;var e=0,r=0,n=0,l=0,o=0,i=0,c=0,u=0,v=0,m=0,d=0,p=0,h=0,g=0,b=0,f=0,_=0,w=!0,y=!1,x=void 0;try{for(var C,I=s()(t);!(w=(C=I.next()).done);w=!0){var k=C.value;if(e+=parseInt(k.sum),parseInt(k.sum)>55){switch(1===parseInt(k.user.sex)?r+=1:n+=1,1===parseInt(k.user.marriage)?l+=1:o+=1,parseInt(k.user.salary)){case 1:i+=1;break;case 2:c+=1;break;case 3:u+=1;break;case 4:v+=1;break;case 5:m+=1;break;case 6:d+=1;break;case 7:p+=1}parseInt(k.user.age)>=20&&parseInt(k.user.age)<30?h+=1:parseInt(k.user.age)>=30&&parseInt(k.user.age)<40?g+=1:parseInt(k.user.age)>=40&&parseInt(k.user.age)<50?b+=1:parseInt(k.user.age)>=50&&parseInt(k.user.age)<70?f+=1:parseInt(k.user.age)>=70&&(_+=1)}}}catch(a){y=!0,x=a}finally{try{!w&&I.return&&I.return()}finally{if(y)throw x}}var D={type:"score",value:e=Math.round(e/t.length)};a.gaugeChartData.rows.push(D);var S=[{"人群":"男","负面情绪倾向人数":r},{"人群":"女","负面情绪倾向人数":n},{"人群":"已婚","负面情绪倾向人数":l},{"人群":"未婚","负面情绪倾向人数":o}],N=!0,M=!1,E=void 0;try{for(var j,A=s()(S);!(N=(j=A.next()).done);N=!0){var O=j.value;a.pieChartData.rows.push(O)}}catch(a){M=!0,E=a}finally{try{!N&&A.return&&A.return()}finally{if(M)throw E}}var L=[{"收入情况":"1000元以下","人数":i},{"收入情况":"1000-1999元","人数":c},{"收入情况":"2000-3999元","人数":u},{"收入情况":"4000-5999元","人数":v},{"收入情况":"6000-9999元","人数":m},{"收入情况":"10000-19999元","人数":d},{"收入情况":"200000元以上","人数":p}],V=!0,B=!1,P=void 0;try{for(var R,F=s()(L);!(V=(R=F.next()).done);V=!0){var z=R.value;a.ringChartData.rows.push(z)}}catch(a){B=!0,P=a}finally{try{!V&&F.return&&F.return()}finally{if(B)throw P}}var W=[{"年龄":"20-30","愤怒":h},{"年龄":"30-40","愤怒":g},{"年龄":"40-50","愤怒":b},{"年龄":"50-70","愤怒":f},{"年龄":"70+","愤怒":_}],Z=!0,$=!1,J=void 0;try{for(var T,U=s()(W);!(Z=(T=U.next()).done);Z=!0){var q=T.value;a.histogramData.rows.push(q)}}catch(a){$=!0,J=a}finally{try{!Z&&U.return&&U.return()}finally{if($)throw J}}a.sex_relevance="0.701(50%-60%概率相关)",a.marriage_relevance="0.745(60%-75%概率相关)",a.age_relevance="0.709(60%-75%概率相关)",a.salary_relevance="0.326(低于50%概率相关)"})},tableRowName:function(a){var t=a.row,e=(a.rowIndex,"");return parseInt(t.sum)<=45?e+="safe-novack-row":parseInt(t.sum)>45&&parseInt(t.sum)<=55?e+="light-novack-row":parseInt(t.sum)>55&&parseInt(t.sum)<=75?e+="medium-novack-row":parseInt(t.sum)>75&&parseInt(t.sum)<=85?e+="more-novack-row":parseInt(t.sum)>85&&(e+="warning-novack-row"),e},calculateAverage:function(a){var t=a.columns,e=a.data,r=[];return t.forEach(function(a,t){if(0!==t){var s=e.map(function(t){return Number(t[a.property])});s.every(function(a){return isNaN(a)})?r[t]="--":(r[t]=s.reduce(function(a,t){var e=Number(t);return isNaN(e)?a:a+t},0),r[t]=(r[t]/e.length).toFixed(3))}else r[t]="平均值"}),r},handleExamine:function(a,t){var e=this;this.ExamineDialogVisible=!0,this.username=t.user.username,this.userId=t.user.id;var r=[];r.push(t.user),this.userInfo=r;var s={userid:parseInt(t.user.id)};Object(o.o)(s).then(function(a){e.usernovackhistory=a.data})},dateformatter:function(a,t){return Object(i.a)(a,t)},formatSex:function(a,t){return Object(i.d)(a,t)},formatSalary:function(a,t){return Object(i.c)(a,t)},formatMarriage:function(a,t){return Object(i.b)(a,t)},formatWork:function(a,t){return Object(i.e)(a,t)}},mounted:function(){this.getData()}}),u={render:function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("section",{staticClass:"novackhistory"},[e("div",{staticClass:"crumbs"},[e("el-breadcrumb",{attrs:{separator:"/"}},[e("el-breadcrumb-item",[e("i",{staticClass:"el-icon-time"}),a._v(" 历史记录")]),a._v(" "),e("el-breadcrumb-item",[a._v("Novack历史记录")])],1)],1),a._v(" "),e("section",{staticClass:"sextion-1"},[e("el-row",{attrs:{gutter:10}},[e("el-col",{attrs:{span:11}},[e("el-card",{staticClass:"box-card",staticStyle:{overflow:"auto"}},[e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:a.listLoading,expression:"listLoading"}],attrs:{data:a.novackhistory,height:"460",width:"95%","summary-method":a.calculateAverage,"show-summary":"","highlight-current-row":"",border:"","row-class-name":a.tableRowName}},[e("el-table-column",{attrs:{prop:"id",label:"序号",width:"80",sortable:""}}),a._v(" "),e("el-table-column",{attrs:{prop:"user.id",label:"测试者ID",width:"80"}}),a._v(" "),e("el-table-column",{attrs:{prop:"time",label:"测试时间",width:"160",formatter:a.dateformatter,sortable:""}}),a._v(" "),e("el-table-column",{attrs:{prop:"sum",label:"愤怒评分",sortable:""}}),a._v(" "),e("el-table-column",{attrs:{label:"操作",width:"100",fixed:"right"},scopedSlots:a._u([{key:"default",fn:function(t){return[e("el-button",{attrs:{size:"small",type:"text"},on:{click:function(e){return a.handleExamine(t.$index,t.row)}}},[a._v("历史记录")])]}}])})],1)],1)],1),a._v(" "),e("el-col",{attrs:{span:11}},[e("el-card",{staticClass:"box-card"},[e("ve-gauge",{attrs:{data:a.gaugeChartData,settings:a.gaugeChartSettings}}),a._v(" "),e("span",[a._v("平均愤怒评分的仪表图")])],1)],1)],1)],1),a._v(" "),e("section",{staticClass:"section-2"},[e("el-row",{attrs:{gutter:10}},[e("el-col",{attrs:{span:11}},[e("el-card",{staticClass:"box-card"},[e("ve-pie",{attrs:{data:a.pieChartData,settings:a.pieChartSettings}}),a._v(" "),e("span",[a._v("有明显负面情绪倾向人群的性别、婚姻情况分布")]),a._v(" "),e("p",[a._v("性别关联度:"+a._s(a.sex_relevance))]),a._v(" "),e("p",[a._v("是否已婚关联度:"+a._s(a.marriage_relevance))])],1)],1),a._v(" "),e("el-col",{attrs:{span:11}},[e("el-card",{staticClass:"box-card"},[e("ve-histogram",{attrs:{data:a.histogramData}}),a._v(" "),e("span",[a._v("有负面情绪倾向人群的年龄统计")]),a._v(" "),e("p",[a._v("年龄关联度:"+a._s(a.age_relevance))])],1)],1)],1)],1),a._v(" "),e("section",{staticClass:"section-3"},[e("el-row",{attrs:{gutter:10}},[e("el-col",{attrs:{span:11}},[e("el-card",{staticClass:"box-card"},[e("ve-ring",{attrs:{data:a.ringChartData}}),a._v(" "),e("span",[a._v("有明显负面情绪倾向人群的收入分布")]),a._v(" "),e("p",[a._v("收入关联度:"+a._s(a.salary_relevance))])],1)],1),a._v(" "),e("el-col",{attrs:{span:11}},[e("el-card",{staticClass:"box-card"},[e("ve-heatmap",{attrs:{data:a.heatMapChartData,settings:a.heatMapChartSettings}}),a._v(" "),e("span",[a._v("有明显负面情绪倾向人群的地区分布")])],1)],1)],1)],1),a._v(" "),e("el-dialog",{attrs:{title:"历史记录",visible:a.ExamineDialogVisible,width:"50%"},on:{"update:visible":function(t){a.ExamineDialogVisible=t}}},[e("p",{staticStyle:{margin:"20px 0"}},[a._v("用户名: "+a._s(a.username)+" (ID:"+a._s(a.userId)+") 的历史记录")]),a._v(" "),e("div",{staticClass:"userInfoTable",staticStyle:{"margin-bottom":"20px"}},[e("el-table",{attrs:{data:a.userInfo,border:"",width:"100%"}},[e("el-table-column",{attrs:{prop:"age",label:"年龄",width:"80"}}),a._v(" "),e("el-table-column",{attrs:{prop:"sex",label:"性别",formatter:a.formatSex,width:"80"}}),a._v(" "),e("el-table-column",{attrs:{prop:"location",label:"地区"}}),a._v(" "),e("el-table-column",{attrs:{prop:"salary",label:"薪资",formatter:a.formatSalary,width:"120"}}),a._v(" "),e("el-table-column",{attrs:{prop:"work",label:"从事行业",formatter:a.formatWork}}),a._v(" "),e("el-table-column",{attrs:{prop:"marriage",label:"是否已婚",formatter:a.formatMarriage,width:"80"}})],1)],1),a._v(" "),e("div",{staticStyle:{"text-align":"center"}},[e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:a.listLoading,expression:"listLoading"}],attrs:{data:a.usernovackhistory,"max-height":"300",border:"",width:"100%","row-class-name":a.tableRowName}},[e("el-table-column",{attrs:{prop:"id",label:"序号",width:"80",sortable:""}}),a._v(" "),e("el-table-column",{attrs:{prop:"userid",label:"测试者ID",width:"80"}}),a._v(" "),e("el-table-column",{attrs:{prop:"time",label:"测试时间",formatter:a.dateformatter,sortable:""}}),a._v(" "),e("el-table-column",{attrs:{prop:"sum",label:"愤怒评分",sortable:""}})],1)],1),a._v(" "),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"primary"},on:{click:function(t){a.ExamineDialogVisible=!1}}},[a._v("关闭")])],1)])],1)},staticRenderFns:[]};var v=e("VU/8")(c,u,!1,function(a){e("M3+Z"),e("c3/a")},"data-v-9496c4ac",null);t.default=v.exports},"c3/a":function(a,t){}});
//# sourceMappingURL=3.865a62f808ce65b2ff4e.js.map