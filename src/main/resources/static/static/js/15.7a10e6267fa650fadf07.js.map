{"version":3,"sources":["webpack:///src/components/user-manage/adminTable.vue","webpack:///./src/components/user-manage/adminTable.vue?a6a2","webpack:///./src/components/user-manage/adminTable.vue"],"names":["adminTable","name","data","_this","this","listLoading","adminList","RegisterDialog","registerAdminForm","username","password","rules","required","message","trigger","validator","rule","value","callback","para","Object","api","then","res","Error","confirmPassword","methods","getData","_this2","promise_default","a","resolve","reject","authorityFormatter","row","parseInt","authority","isDisabled","index","deleteAdmin","_this3","deleteUser","id","splice","$message","type","onSubmit","formName","_this4","$refs","validate","valid","admindata","error","mounted","user_manage_adminTable","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","separator","_v","span","staticStyle","text-align","margin","size","on","click","$event","title","visible","width","update:visible","ref","label-width","model","label","prop","placeholder","$$v","$set","expression","slot","directives","rawName","overflow-y","max-height","highlight-current-row","border","formatter","fixed","scopedSlots","_u","key","fn","scope","plain","disabled","$index","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/15.7a10e6267fa650fadf07.js","sourcesContent":["<template>\n  <section>\n    <div class=\"crumbs\">\n      <el-breadcrumb separator=\"/\">\n        <el-breadcrumb-item><i class=\"el-icon-document\"></i> 用户</el-breadcrumb-item>\n        <el-breadcrumb-item>分析人员管理</el-breadcrumb-item>\n      </el-breadcrumb>\n    </div>\n\n    <el-row>\n      <el-col :span=\"22\">\n        <div style=\"text-align: left;margin: 20px 0\">\n          <el-button size=\"small\" type=\"primary\" @click=\"RegisterDialog = true\">注册分析员账号</el-button>\n        </div>\n      </el-col>\n    </el-row>\n\n    <el-dialog title=\"注册分析人员账号\" :visible.sync=\"RegisterDialog\" width=\"30%\">\n\n      <el-form label-width=\"80px\" :model=\"registerAdminForm\" :rules=\"rules\" ref=\"registerAdminForm\">\n        <el-form-item label=\"用户名\" prop=\"username\">\n          <el-input v-model=\"registerAdminForm.username\" placeholder=\"请输入用户名\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"密码\" prop=\"password\">\n          <el-input type=\"password\" v-model=\"registerAdminForm.password\" placeholder=\"请输入密码\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"确认密码\" prop=\"confirmPassword\">\n          <el-input type=\"password\" v-model=\"registerAdminForm.confirmPassword\" placeholder=\"请再次输入密码\"></el-input>\n        </el-form-item>\n      </el-form>\n\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"RegisterDialog = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"onSubmit('registerAdminForm')\">注 册</el-button>\n      </span>\n    </el-dialog>\n\n    <el-row>\n      <el-col :span=\"22\">\n        <div class=\"adminTable\">\n          <el-table :data=\"adminList\" v-loading=\"listLoading\" max-height=\"500\" highlight-current-row border\n                    style=\"width: 100%;overflow-y: hidden;\">\n            <el-table-column prop=\"id\" label=\"序号\" width=\"90\"></el-table-column>\n            <el-table-column prop=\"username\" label=\"姓名\"></el-table-column>\n            <el-table-column prop=\"authority\" label=\"权限等级\" :formatter=\"authorityFormatter\"></el-table-column>\n            <el-table-column label=\"操作\" width=\"80\" fixed=\"right\">\n              <template slot-scope=\"scope\">\n                <el-button size=\"small\" type=\"danger\" plain @click=\"deleteAdmin(scope.$index, scope.row)\"\n                           :disabled=\"isDisabled(scope.$index, scope.row)\">删除\n                </el-button>\n              </template>\n            </el-table-column>\n          </el-table>\n        </div>\n      </el-col>\n    </el-row>\n\n  </section>\n</template>\n\n<script>\n  import {getAdminList, deleteAdminAccount, isRepeatedAdminName, adminRegister} from \"../../api/api\";\n\n  export default {\n    name: \"adminTable\",\n    data() {\n      let checkPassword = (rule, value, callback) => {\n        if (value !== this.registerAdminForm.password) {\n          callback(new Error('两次输入密码不一致!'));\n        } else {\n          callback();\n        }\n      };\n      let checkRepeatedAdminName = (rule, value, callback) => {\n        let para = {'username': value};\n        isRepeatedAdminName(para).then((res) => {\n          if (res.data === false) {\n            callback(new Error('该用户名用户已存在'));\n          } else {\n            callback();\n          }\n        });\n      };\n      return {\n        // table\n        listLoading: true,\n        adminList: [],\n        // dialogs\n        RegisterDialog: false,\n        registerAdminForm: {\n          username: '',\n          password: '',\n        },\n        rules: {\n          username: [{\n            required: true, message: '请输入用户名', trigger: 'blur'\n          }, {\n            validator: checkRepeatedAdminName, trigger: 'blur'\n          }],\n          password: [\n            {required: true, message: '请输入密码', trigger: 'blur'}\n          ],\n          confirmPassword: [\n            {validator: checkPassword, trigger: 'blur'}\n          ],\n        }\n      }\n    },\n    methods: {\n      getData: function () {\n        new Promise((resolve, reject) => {\n          let data = getAdminList().then(res => {\n            return res.data;\n          });\n          resolve(data);\n        }).then((res) => {\n          this.adminList = res;\n          this.listLoading = false;\n        })\n      },\n\n      authorityFormatter: function (row) {\n        switch (parseInt(row.authority)) {\n          case 0:\n            return '系统管理员';\n          case 1:\n            return '数据分析员';\n        }\n      },\n      isDisabled: function (index, row) {\n        switch (parseInt(row.authority)) {\n          case 0:\n            return true;\n          default:\n            return false;\n        }\n      },\n      deleteAdmin: function (index, row) {\n        let deleteUser = {'id': parseInt(row.id)};\n        deleteAdminAccount(deleteUser).then((res) => {\n          if (res.data == 1) {\n            this.adminList.splice(index, 1);\n            this.$message({\n              type: 'success',\n              message: '删除成功'\n            });\n          }\n        });\n      },\n\n      onSubmit(formName) {\n        const self = this;\n        self.$refs[formName].validate((valid) => {\n          if (valid) {\n            this.$message({message: '验证通过', type: 'success'});\n            let admindata = {\n              username: this.registerAdminForm.username,\n              password: this.registerAdminForm.password,\n            };\n            adminRegister(admindata).then((res) => {\n              if (res.data === 1) {\n                this.$message({\n                  message: '注册成功',\n                  type: 'success'\n                });\n                this.getData();\n              } else {\n                this.$message.error('注册失败');\n              }\n            });\n            this.RegisterDialog = false;\n            return true;\n          } else {\n            this.$message.error('表单填写不完整');\n            return false;\n          }\n        })\n      }\n    },\n    mounted() {\n      this.getData();\n    },\n  }\n</script>\n\n<style scoped>\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/user-manage/adminTable.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',[_c('div',{staticClass:\"crumbs\"},[_c('el-breadcrumb',{attrs:{\"separator\":\"/\"}},[_c('el-breadcrumb-item',[_c('i',{staticClass:\"el-icon-document\"}),_vm._v(\" 用户\")]),_vm._v(\" \"),_c('el-breadcrumb-item',[_vm._v(\"分析人员管理\")])],1)],1),_vm._v(\" \"),_c('el-row',[_c('el-col',{attrs:{\"span\":22}},[_c('div',{staticStyle:{\"text-align\":\"left\",\"margin\":\"20px 0\"}},[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"},on:{\"click\":function($event){_vm.RegisterDialog = true}}},[_vm._v(\"注册分析员账号\")])],1)])],1),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":\"注册分析人员账号\",\"visible\":_vm.RegisterDialog,\"width\":\"30%\"},on:{\"update:visible\":function($event){_vm.RegisterDialog=$event}}},[_c('el-form',{ref:\"registerAdminForm\",attrs:{\"label-width\":\"80px\",\"model\":_vm.registerAdminForm,\"rules\":_vm.rules}},[_c('el-form-item',{attrs:{\"label\":\"用户名\",\"prop\":\"username\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入用户名\"},model:{value:(_vm.registerAdminForm.username),callback:function ($$v) {_vm.$set(_vm.registerAdminForm, \"username\", $$v)},expression:\"registerAdminForm.username\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"密码\",\"prop\":\"password\"}},[_c('el-input',{attrs:{\"type\":\"password\",\"placeholder\":\"请输入密码\"},model:{value:(_vm.registerAdminForm.password),callback:function ($$v) {_vm.$set(_vm.registerAdminForm, \"password\", $$v)},expression:\"registerAdminForm.password\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"确认密码\",\"prop\":\"confirmPassword\"}},[_c('el-input',{attrs:{\"type\":\"password\",\"placeholder\":\"请再次输入密码\"},model:{value:(_vm.registerAdminForm.confirmPassword),callback:function ($$v) {_vm.$set(_vm.registerAdminForm, \"confirmPassword\", $$v)},expression:\"registerAdminForm.confirmPassword\"}})],1)],1),_vm._v(\" \"),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.RegisterDialog = false}}},[_vm._v(\"取 消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.onSubmit('registerAdminForm')}}},[_vm._v(\"注 册\")])],1)],1),_vm._v(\" \"),_c('el-row',[_c('el-col',{attrs:{\"span\":22}},[_c('div',{staticClass:\"adminTable\"},[_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.listLoading),expression:\"listLoading\"}],staticStyle:{\"width\":\"100%\",\"overflow-y\":\"hidden\"},attrs:{\"data\":_vm.adminList,\"max-height\":\"500\",\"highlight-current-row\":\"\",\"border\":\"\"}},[_c('el-table-column',{attrs:{\"prop\":\"id\",\"label\":\"序号\",\"width\":\"90\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"username\",\"label\":\"姓名\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"authority\",\"label\":\"权限等级\",\"formatter\":_vm.authorityFormatter}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"80\",\"fixed\":\"right\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"danger\",\"plain\":\"\",\"disabled\":_vm.isDisabled(scope.$index, scope.row)},on:{\"click\":function($event){return _vm.deleteAdmin(scope.$index, scope.row)}}},[_vm._v(\"删除\\n              \")])]}}])})],1)],1)])],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-557244a6\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/user-manage/adminTable.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-557244a6\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./adminTable.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./adminTable.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./adminTable.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-557244a6\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./adminTable.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-557244a6\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/user-manage/adminTable.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}