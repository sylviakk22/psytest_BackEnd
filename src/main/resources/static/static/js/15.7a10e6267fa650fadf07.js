webpackJsonp([15],{GK6C:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("//Fk"),s=r.n(a),i=r("P9l9"),n={name:"adminTable",data:function(){var e=this;return{listLoading:!0,adminList:[],RegisterDialog:!1,registerAdminForm:{username:"",password:""},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{validator:function(e,t,r){var a={username:t};Object(i.r)(a).then(function(e){!1===e.data?r(new Error("该用户名用户已存在")):r()})},trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],confirmPassword:[{validator:function(t,r,a){r!==e.registerAdminForm.password?a(new Error("两次输入密码不一致!")):a()},trigger:"blur"}]}}},methods:{getData:function(){var e=this;new s.a(function(e,t){e(Object(i.h)().then(function(e){return e.data}))}).then(function(t){e.adminList=t,e.listLoading=!1})},authorityFormatter:function(e){switch(parseInt(e.authority)){case 0:return"系统管理员";case 1:return"数据分析员"}},isDisabled:function(e,t){switch(parseInt(t.authority)){case 0:return!0;default:return!1}},deleteAdmin:function(e,t){var r=this,a={id:parseInt(t.id)};Object(i.g)(a).then(function(t){1==t.data&&(r.adminList.splice(e,1),r.$message({type:"success",message:"删除成功"}))})},onSubmit:function(e){var t=this;this.$refs[e].validate(function(e){if(e){t.$message({message:"验证通过",type:"success"});var r={username:t.registerAdminForm.username,password:t.registerAdminForm.password};return Object(i.b)(r).then(function(e){1===e.data?(t.$message({message:"注册成功",type:"success"}),t.getData()):t.$message.error("注册失败")}),t.RegisterDialog=!1,!0}return t.$message.error("表单填写不完整"),!1})}},mounted:function(){this.getData()}},o={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",[r("div",{staticClass:"crumbs"},[r("el-breadcrumb",{attrs:{separator:"/"}},[r("el-breadcrumb-item",[r("i",{staticClass:"el-icon-document"}),e._v(" 用户")]),e._v(" "),r("el-breadcrumb-item",[e._v("分析人员管理")])],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:22}},[r("div",{staticStyle:{"text-align":"left",margin:"20px 0"}},[r("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){e.RegisterDialog=!0}}},[e._v("注册分析员账号")])],1)])],1),e._v(" "),r("el-dialog",{attrs:{title:"注册分析人员账号",visible:e.RegisterDialog,width:"30%"},on:{"update:visible":function(t){e.RegisterDialog=t}}},[r("el-form",{ref:"registerAdminForm",attrs:{"label-width":"80px",model:e.registerAdminForm,rules:e.rules}},[r("el-form-item",{attrs:{label:"用户名",prop:"username"}},[r("el-input",{attrs:{placeholder:"请输入用户名"},model:{value:e.registerAdminForm.username,callback:function(t){e.$set(e.registerAdminForm,"username",t)},expression:"registerAdminForm.username"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"密码",prop:"password"}},[r("el-input",{attrs:{type:"password",placeholder:"请输入密码"},model:{value:e.registerAdminForm.password,callback:function(t){e.$set(e.registerAdminForm,"password",t)},expression:"registerAdminForm.password"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"确认密码",prop:"confirmPassword"}},[r("el-input",{attrs:{type:"password",placeholder:"请再次输入密码"},model:{value:e.registerAdminForm.confirmPassword,callback:function(t){e.$set(e.registerAdminForm,"confirmPassword",t)},expression:"registerAdminForm.confirmPassword"}})],1)],1),e._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.RegisterDialog=!1}}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onSubmit("registerAdminForm")}}},[e._v("注 册")])],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:22}},[r("div",{staticClass:"adminTable"},[r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%","overflow-y":"hidden"},attrs:{data:e.adminList,"max-height":"500","highlight-current-row":"",border:""}},[r("el-table-column",{attrs:{prop:"id",label:"序号",width:"90"}}),e._v(" "),r("el-table-column",{attrs:{prop:"username",label:"姓名"}}),e._v(" "),r("el-table-column",{attrs:{prop:"authority",label:"权限等级",formatter:e.authorityFormatter}}),e._v(" "),r("el-table-column",{attrs:{label:"操作",width:"80",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{size:"small",type:"danger",plain:"",disabled:e.isDisabled(t.$index,t.row)},on:{click:function(r){return e.deleteAdmin(t.$index,t.row)}}},[e._v("删除\n              ")])]}}])})],1)],1)])],1)],1)},staticRenderFns:[]};var l=r("VU/8")(n,o,!1,function(e){r("aUUq")},"data-v-557244a6",null);t.default=l.exports},aUUq:function(e,t){}});
//# sourceMappingURL=15.7a10e6267fa650fadf07.js.map